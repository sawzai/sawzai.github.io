"use strict";const srCart={btnClass:".pgb-custom-cart-row .pgb-buy-button-link",isHome:!1,trackData:{},expiryDays:7,init:function(){this.checkParams();let t=window.location.href;t.includes("-cart")?this.cartPage():this.generateBtn()},checkParams:function(){let t=this.getParams("affiliate"),e=this.getParams("utm_source");for(let a in t&&!e&&(this.trackData.utm_source=t,this.createCookie("utm_source",t,this.expiryDays)),this.trackData)this.trackData[a]=this.getParams(a)||this.readCookie(a)||this.trackData[a],""!==this.getParams(a)&&this.createCookie(a,this.trackData[a],this.expiryDays)},generateBtn:function(){let t=document.querySelectorAll(this.btnClass);t.length>0&&t.forEach(t=>{let e=t.getAttribute("href"),a=new URL(e),r="";a.searchParams.has("add-to-cart")&&(r+="&add-to-cart="+a.searchParams.get("add-to-cart")),a.searchParams.has("plan")&&(r+="&plan="+a.searchParams.get("plan")),a.searchParams.has("coupon")&&(r+="&coupon="+a.searchParams.get("coupon")),e=e.split("?")[0];let i=this.combineParams(r),s=e.includes("?")?"&":"?",c=`${e}${s}${i}`;t.setAttribute("href",c)});let e=document.querySelectorAll(".pgb-custom-srlogo, .pgb-custom-hero-location .pgb-buy-button-link, .srtrack, .srlogo");e.length>0&&e.forEach(t=>{let e=this.getParams("utm_source"),a=this.getParams("affiliate");a&&(this.trackData.affiliate=a),e&&!a&&(this.trackData.affiliate=e,this.createCookie("affiliate",e,this.expiryDays));let r=t.getAttribute("href");r=r.split("?")[0];let i=this.generateURL(),s=r.includes("?")?"&":"?",c=`${r}${s}${i}`;t.setAttribute("href",c)})},cartPage:function(){this.checkParams();let t=new URL(window.location.href);t.search!=="?"+this.combineParams()&&(t.search=this.combineParams(),window.location.href=t)},eraseCookie:function(t){this.createCookie(t,"",-1)},readCookie:function(t){let e=t+"=",a=document.cookie?document.cookie.split(";"):[];for(let r=0;r<a.length;r++){let i=a[r].trim();if(0===i.indexOf(e))return i.substring(e.length,i.length)}},createCookie:function(t,e,a){let r="";if(a){let i=new Date;i.setTime(i.getTime()+864e5*a),r="; expires="+i.toGMTString()}document.cookie=`${t}=${e}${r}; secure; path=/`},getParams:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");let e=RegExp("[\\?&]"+t+"=([^&#]*)"),a=e.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},generateURL:function(){let t="";for(let e in this.trackData)t+=""===t?"":"&",t+=void 0!==this.trackData[e]?`${e}=${this.trackData[e]}`:"";return t},combineParams:function(t){let e="";for(let a in this.trackData)e+=""===e?"":"&",e+=void 0!==this.trackData[a]?`${a}=${this.trackData[a]}`:"";return this.getParams("coupon")&&(e+="&coupon="+this.getParams("coupon")),t&&(e+=t),e}};