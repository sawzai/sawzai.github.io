"use strict";const srCart={btnClass:".pgb-custom-cart-row .pgb-buy-button-link",isHome:!1,trackData:{},expiryDays:7,init:function(){this.checkParams();let t=window.location.href;t.includes("-cart")?this.cartPage():this.generateBtn()},checkParams:function(){let t=this.getParams("affiliate"),e=this.getParams("utm_source");for(let a in t&&!e&&(this.trackData.utm_source=t,this.createCookie("utm_source",t,this.expiryDays)),this.trackData){let r=this.getParams(a),i=this.readCookie(a);this.trackData[a]=r||i||this.trackData[a],""!==r&&this.createCookie(a,this.trackData[a],this.expiryDays)}},generateBtn:function(){let t=document.querySelectorAll(this.btnClass);t.length>0&&t.forEach(t=>{let e=t.getAttribute("href");if(!e)return;let a;try{a=new URL(e,window.location.origin)}catch(r){return}let i=new URLSearchParams;a.searchParams.has("add-to-cart")&&i.append("add-to-cart",a.searchParams.get("add-to-cart")),a.searchParams.has("plan")&&i.append("plan",a.searchParams.get("plan")),a.searchParams.has("coupon")&&i.append("coupon",a.searchParams.get("coupon")),e=e.split("?")[0];let s=this.combineParams(i.toString()),n=e.includes("?")?"&":"?",o=`${e}${n}${s}`;t.setAttribute("href",o)});let e=document.querySelectorAll(".pgb-custom-srlogo, .pgb-custom-hero-location .pgb-buy-button-link, .srtrack, .srlogo");e.length>0&&e.forEach(t=>{let e=this.getParams("utm_source"),a=this.getParams("affiliate");a&&(this.trackData.affiliate=a),e&&!a&&(this.trackData.affiliate=e,this.createCookie("affiliate",e,this.expiryDays));let r=t.getAttribute("href");if(!r)return;r=r.split("?")[0];let i=this.generateURL(),s=r.includes("?")?"&":"?",n=`${r}${s}${i}`;t.setAttribute("href",n)})},cartPage:function(){this.checkParams();let t=new URL(window.location.href),e=this.combineParams(),a=new URLSearchParams(t.search).toString();a!==e&&(t.search=e,window.location.replace(t.toString()))},eraseCookie:function(t){this.createCookie(t,"",-1)},readCookie:function(t){let e=t+"=",a=document.cookie?document.cookie.split(";"):[];for(let r=0;r<a.length;r++){let i=a[r].trim();if(0===i.indexOf(e)){let s=i.substring(e.length,i.length);try{return decodeURIComponent(s)}catch(n){return s}}}return""},createCookie:function(t,e,a){let r="";if(a){let i=new Date;i.setTime(i.getTime()+864e5*a),r="; expires="+i.toUTCString()}document.cookie=`${t}=${encodeURIComponent(e)}${r}; secure; path=/`},getParams:function(t){let e=new URLSearchParams(window.location.search).get(t);return null===e?"":e},generateURL:function(){let t=new URLSearchParams;for(let e in this.trackData){let a=this.trackData[e];null!=a&&""!==a&&t.set(e,String(a))}return t.toString()},combineParams:function(t){let e=new URLSearchParams;for(let a in this.trackData){let r=this.trackData[a];null!=r&&""!==r&&e.set(a,String(r))}let i=this.getParams("coupon");if(i&&e.set("coupon",i),t){let s=new URLSearchParams(t.replace(/^&/,""));for(let[n,o]of s.entries())e.append(n,o)}return e.toString()}};document.addEventListener("DOMContentLoaded",function(){srCart.trackData.utm_source="affiliateName",srCart.btnClass=".pgb-custom-cart-row .pgb-buy-button-link",srCart.init()});