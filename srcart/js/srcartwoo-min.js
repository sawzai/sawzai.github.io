"use strict";const srCart={btnClass:".pgb-custom-cart-row .pgb-buy-button-link",isHome:!1,trackData:{},expiryDays:7,init:function(){this.checkParams();let t=window.location.href;t.includes("-cart")?this.cartPage():this.generateBtn()},checkParams:function(){let t=this.getParams("affiliate"),a=this.getParams("utm_source");for(let e in t&&!a&&(this.trackData.utm_source=t,this.createCookie("utm_source",t,this.expiryDays)),this.trackData)this.trackData[e]=this.getParams(e)||this.readCookie(e)||this.trackData[e],""!==this.getParams(e)&&this.createCookie(e,this.trackData[e],this.expiryDays)},generateBtn:function(){let t=document.querySelectorAll(this.btnClass);t.length>0&&t.forEach(t=>{let a=t.getAttribute("href"),e=new URL(a),r="";e.searchParams.has("add-to-cart")&&(r+="&add-to-cart="+e.searchParams.get("add-to-cart")),e.searchParams.has("plan")&&(r+="&plan="+e.searchParams.get("plan")),e.searchParams.has("coupon")&&(r+="&coupon="+e.searchParams.get("coupon")),a=a.split("?")[0];let i=this.combineParams(r),s=a.includes("?")?"&":"?",c=`${a}${s}${i}`;t.setAttribute("href",c)});let a=document.querySelectorAll(".pgb-custom-srlogo, .pgb-custom-hero-location .pgb-buy-button-link, .srtrack, .srlogo");a.length>0&&a.forEach(t=>{let a=this.getParams("utm_source"),e=this.getParams("affiliate");e&&(this.trackData.affiliate=e),a&&!e&&(this.trackData.affiliate=a,this.createCookie("affiliate",a,this.expiryDays));let r=t.getAttribute("href");r=r.split("?")[0];let i=this.generateURL(),s=r.includes("?")?"&":"?",c=`${r}${s}${i}`;t.setAttribute("href",c)})},cartPage:function(){this.checkParams();let t=new URL(window.location.href);t.search!=="?"+this.combineParams()&&(t.search=this.combineParams(),window.location.href=t)},eraseCookie:function(t){this.createCookie(t,"",-1)},readCookie:function(t){let a=t+"=",e=document.cookie?document.cookie.split(";"):[];for(let r=0;r<e.length;r++){let i=e[r].trim();if(0===i.indexOf(a))return i.substring(a.length,i.length)}},createCookie:function(t,a,e){let r="";if(e){let i=new Date;i.setTime(i.getTime()+864e5*e),r="; expires="+i.toGMTString()}document.cookie=`${t}=${a}${r}; secure; path=/`},getParams:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");let a=RegExp("[\\?&]"+t+"=([^&#]*)"),e=a.exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},generateURL:function(){let t="";for(let a in this.trackData)t+=""===t?"":"&",t+=void 0!==this.trackData[a]?`${a}=${this.trackData[a]}`:"";return t},combineParams:function(t){let a="";for(let e in this.trackData)a+=""===a?"":"&",a+=void 0!==this.trackData[e]?`${e}=${this.trackData[e]}`:"";return this.getParams("coupon")&&(a+="&coupon="+this.getParams("coupon")),t&&(a+=t),a}};document.addEventListener("DOMContentLoaded",function(){srCart.trackData.utm_source="affiliateName",srCart.btnClass=".pgb-custom-cart-row .pgb-buy-button-link",srCart.init()});